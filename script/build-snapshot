#!/bin/bash -e

if ! [ -z "$(git status --porcelain)" ]; then
  echo "git status is not clean"
  exit 1
fi

if ! command -v goreleaser &> /dev/null; then
  curl -sfL https://install.goreleaser.com/github.com/goreleaser/goreleaser.sh | sh
  export PATH="bin:$PATH"
fi

cd "$(dirname "$0")/.."

goreleaser build --snapshot --rm-dist $1

echo "âœ… See binaries in ./dist"
